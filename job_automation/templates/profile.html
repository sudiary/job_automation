{% extends "base.html" %}
{% block title %}Profil{% endblock %}
{% block content %}
<div class="max-w-4xl mx-auto grid md:grid-cols-3 gap-6">
  <div class="md:col-span-1 bg-white/5 p-6 rounded-lg">
    <div class="flex flex-col items-center gap-4">
      <img src="{{ url_for('main.uploaded_file', filename=user.profile_pic) }}" class="w-32 h-32 rounded-full object-cover border-2 border-white/5">
      <div class="text-lg font-semibold">{{ user.username }}</div>
      <div class="text-sm text-slate-400">{{ user.email }}</div>
    </div>

    <form method="post" action="{{ url_for('main.upload_profile_pic') }}" enctype="multipart/form-data" class="mt-4">
      <label class="text-sm text-slate-300">Profil Fotoğrafı</label>
      <input type="file" name="profile_pic" class="mt-2 w-full">
      <button class="mt-3 w-full py-2 bg-cyan-400 text-slate-900 rounded">Yükle</button>
    </form>

    <form method="post" action="{{ url_for('main.change_password') }}" class="mt-4">
      <label class="text-sm text-slate-300">Eski şifre</label>
      <input type="password" name="old_password" class="w-full p-2 rounded bg-white/5 mt-2">
      <label class="text-sm text-slate-300 mt-2">Yeni şifre</label>
      <input type="password" name="new_password" class="w-full p-2 rounded bg-white/5 mt-2">
      <button class="mt-3 w-full py-2 bg-amber-400 text-slate-900 rounded">Şifre Değiştir</button>
    </form>

    <form method="post" action="{{ url_for('main.delete_account') }}" class="mt-4">
      <button onclick="return confirm('Hesabınızı silmek istediğinize emin misiniz?')" class="w-full py-2 bg-red-600 rounded">Hesabı Sil</button>
    </form>
  </div>

  <div class="md:col-span-2 bg-white/5 p-6 rounded-lg space-y-4">
    <h3 class="text-xl font-semibold">CV</h3>
    <form method="post" action="{{ url_for('main.upload_cv') }}" enctype="multipart/form-data" class="flex gap-3">
      <input type="file" name="cv" class="flex-1">
      <button class="px-4 py-2 bg-blue-500 rounded">CV Yükle</button>
    </form>
    {% if user.cv_file %}
      <div class="mt-3">
        <strong>Mevcut CV:</strong>
        <a class="underline" href="{{ url_for('main.uploaded_file', filename=user.cv_file) }}">{{ user.cv_file }}</a>
      </div>
    {% endif %}

    <h3 class="text-xl mt-6 font-semibold">İlanlar</h3>
    <a class="inline-block mt-2 px-4 py-2 bg-cyan-500 rounded" href="{{ url_for('main.create_job') }}">Yeni İlan Oluştur</a>

    <div class="mt-4 text-sm text-slate-300">
      Burada profilinize dair ekstra ayarlar ve geçmiş başvurular listelenecek.
    </div>
  </div>
</div>
{% endblock %}
